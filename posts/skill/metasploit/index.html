<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Metasploit工具 - Alian&#39;s Site</title><meta name="Description" content=""><meta property="og:title" content="Metasploit工具" />
<meta property="og:description" content="metasploit" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/skill/metasploit/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-07-22T09:15:46+08:00" />
<meta property="article:modified_time" content="2024-07-22T09:15:46+08:00" /><meta property="og:site_name" content="My cool site" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Metasploit工具"/>
<meta name="twitter:description" content="metasploit"/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/web_icon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/posts/skill/metasploit/" /><link rel="prev" href="http://localhost:1313/posts/config/linux/" /><link rel="next" href="http://localhost:1313/posts/memories/high_school/ref3/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Metasploit工具",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/posts\/skill\/metasploit\/"
        },"genre": "posts","wordcount":  348 ,
        "url": "http:\/\/localhost:1313\/posts\/skill\/metasploit\/","datePublished": "2024-07-22T09:15:46+08:00","dateModified": "2024-07-22T09:15:46+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Alian"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Alian&#39;s Site">Alian&#39;s site</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Select Language">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/posts/skill/metasploit/" selected>English</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Alian&#39;s Site">Alian&#39;s site</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/posts/skill/metasploit/" selected>English</option></select>
                </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Metasploit工具</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Alian</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-07-22">2024-07-22</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;348 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;2 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#basic-command">Basic Command</a>
      <ul>
        <li><a href="#help">help</a></li>
        <li><a href="#search">search</a></li>
      </ul>
    </li>
    <li><a href="#module">Module</a></li>
    <li><a href="#encoder">Encoder</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="metasploit-concepts">Metasploit Concepts</h1>
<p>metasploit模块分为exploit, auxiliary, post-exploitation 模块. 首先是利用漏洞阶段，这一部分可能需要辅助模块的帮助，
比如端口、服务开启等信息. 若成功在目标机上建立了漏洞利用，即创建了一个与目标机之间的<code>session</code>, 之后就能进行进一步的攻击<code>payload</code>.
官方文档地址<a href="https://docs.metasploit.com/" target="_blank" rel="noopener noreffer ">docs_metasploit</a></p>
<h2 id="basic-command">Basic Command</h2>
<h3 id="help">help</h3>
<p>metasploit提供help命令，例如<code>help search</code>会给出</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Usage: search <span style="color:#f92672">[</span>&lt;options&gt;<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>&lt;keywords&gt;:&lt;value&gt;<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Prepending a value with <span style="color:#e6db74">&#39;-&#39;</span> will exclude any matching results.
</span></span><span style="display:flex;"><span>If no options or keywords are provided, cached results are displayed.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OPTIONS:
</span></span><span style="display:flex;"><span>  -h                   Show this help information
</span></span><span style="display:flex;"><span>  -o &lt;file&gt;            Send output to a file in csv format
</span></span><span style="display:flex;"><span>  -S &lt;string&gt;          Regex pattern used to filter search results
</span></span><span style="display:flex;"><span>  -u                   Use module <span style="color:#66d9ef">if</span> there is one result
</span></span><span style="display:flex;"><span>  -s &lt;search_column&gt;   Sort the research results based on &lt;search_column&gt; in ascending order
</span></span><span style="display:flex;"><span>  -r                   Reverse the search results order to descending order
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Keywords:
</span></span><span style="display:flex;"><span>  aka              :  Modules with a matching AKA <span style="color:#f92672">(</span>also-known-as<span style="color:#f92672">)</span> name
</span></span><span style="display:flex;"><span>  author           :  Modules written by this author
</span></span><span style="display:flex;"><span>  arch             :  Modules affecting this architecture
</span></span><span style="display:flex;"><span>  bid              :  Modules with a matching Bugtraq ID
</span></span><span style="display:flex;"><span>  cve              :  Modules with a matching CVE ID
</span></span><span style="display:flex;"><span>  edb              :  Modules with a matching Exploit-DB ID
</span></span><span style="display:flex;"><span>  check            :  Modules that support the <span style="color:#e6db74">&#39;check&#39;</span> method
</span></span><span style="display:flex;"><span>  date             :  Modules with a matching disclosure date
</span></span><span style="display:flex;"><span>  description      :  Modules with a matching description
</span></span><span style="display:flex;"><span>  fullname         :  Modules with a matching full name
</span></span><span style="display:flex;"><span>  mod_time         :  Modules with a matching modification date
</span></span><span style="display:flex;"><span>  name             :  Modules with a matching descriptive name
</span></span><span style="display:flex;"><span>  path             :  Modules with a matching path
</span></span><span style="display:flex;"><span>·····
</span></span><span style="display:flex;"><span>·····
</span></span></code></pre></div><h3 id="search">search</h3>
<p>module的目录组织结构是</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>&lt;No.&gt; &lt;type&gt;/&lt;os&gt;/&lt;service&gt;/&lt;name&gt;
</span></span></code></pre></div><p><code>No.</code>是利用漏洞的编号，在熟悉之后可以省去查找路径直接使用<code>use No</code>进入到<code>exploit</code>目录，<code>type</code>可选项如下module描述，
<code>os</code>是漏洞利用对应的操作系统，如Linu, windows, <code>service</code>是使用的服务种类，可以用<code>nmap</code>在不同的端口看到，比如80的web等等</p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>模块分类<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Auxiliary</td>
<td>Scanning, fuzzing, sniffing, and admin capabilities. Offer extra assistance and functionality.</td>
</tr>
<tr>
<td>Encoders</td>
<td>Ensure that payloads are intact to their destination.</td>
</tr>
<tr>
<td>Exploits</td>
<td>Defined as modules that exploit a vulnerability that will allow for the payload delivery.</td>
</tr>
<tr>
<td>NOPs (No Operation code)</td>
<td>Keep the payload sizes consistent across exploit attempts.</td>
</tr>
<tr>
<td>Payloads</td>
<td>Code runs remotely and calls back to the attacker machine to establish a connection (or shell).</td>
</tr>
<tr>
<td>Plugins</td>
<td>Additional scripts can be integrated within an assessment with msfconsole and coexist.</td>
</tr>
<tr>
<td>Post</td>
<td>Wide array of modules to gather information, pivot deeper, etc.</td>
</tr>
</tbody>
</table>
</div>
        </div>
    </div>
<p>有一些概念需要澄清.</p>
<ul>
<li>payload:  是指在成功利用目标系统的漏洞后，实际在目标系统上执行的代码</li>
<li>session:  攻击者与受害者系统之间已经建立的活动连接</li>
<li>exploit:  选择特定模块后，设置相应的参数，对目标机进行漏洞利用, 以执行<code>payload</code></li>
</ul>
<h2 id="module">Module</h2>
<p>metasploit的各个模块都组织到文件夹下，我们需要</p>
<h2 id="encoder">Encoder</h2>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Function of Encoder<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Encoders transform the original payload, which is typically shellcode or other forms of malicious code, into an altered form that still accomplishes the same objective but is no longer easily recognizable by signature-based security systems.</div>
        </div>
    </div>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-07-22</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://localhost:1313/posts/skill/metasploit/" data-title="Metasploit工具"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/skill/metasploit/"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://localhost:1313/posts/skill/metasploit/" data-title="Metasploit工具"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://localhost:1313/posts/skill/metasploit/" data-title="Metasploit工具"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://localhost:1313/posts/skill/metasploit/" data-title="Metasploit工具"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/config/linux/" class="prev" rel="prev" title="Linux"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Linux</a>
            <a href="/posts/memories/high_school/ref3/" class="next" rel="next" title="适时怀念（三）">适时怀念（三）<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.124.1">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Alian</a></span></div>
    
        
        <script async src=" //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js "></script>
    

    
        
            <section>
                
                    <span id="busuanzi_container_value_site_pv"><i class="far fa-eye fa-fw"></i>
                        
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                

                
                    &nbsp;|&nbsp;              
                

                
                    <span id="busuanzi_container_value_site_uv"><i class="fa fa-user"></i>
                        
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
            </section>
        

        
        
    

</div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
